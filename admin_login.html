<!DOCTYPE html><html lang="th"><head><meta charset="utf-8">
<title>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="config.js"></script>
<style>body{font-family:"Prompt",sans-serif;display:flex;justify-content:center;align-items:center;min-height:100vh;margin:0;background:linear-gradient(135deg,#06b6d4,#10b981)}
.box{background:#fff;padding:32px 24px;border-radius:16px;box-shadow:0 8px 30px rgba(0,0,0,.1);width:100%;max-width:400px;text-align:center}
input,button{width:100%;padding:12px;margin:8px 0;border-radius:10px;border:1px solid #e2e8f0;font-size:15px}
button{border:none;color:#fff;font-weight:700;background:linear-gradient(135deg,#0ea5e9,#10b981);cursor:pointer}
.msg{min-height:20px;font-size:14px;color:#065f46;margin-top:8px}</style></head>
<body>
  <div class="box">
    <h2>üîê ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</h2>
    <input id="email" type="email" placeholder="‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô">
    <input id="password" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ Password)">
    <button id="btnLoginPw">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    <button id="btnSendMagic">‡∏™‡πà‡∏á Magic Link</button>
    <div class="msg" id="msg"></div>
  </div>
<script>
const {SUPABASE_URL,SUPABASE_ANON_KEY,REDIRECT_ADMIN}=window.APP_CONFIG;
const sb=supabase.createClient(SUPABASE_URL,SUPABASE_ANON_KEY);
const toUrl=p=>new URL(p,location.href).href; const msg=document.getElementById('msg');

document.getElementById('btnLoginPw').onclick=async ()=>{
  const email=document.getElementById('email').value.trim();
  const pw=document.getElementById('password').value;
  if(!email||!pw){ msg.textContent='‚ö†Ô∏è ‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•/‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô'; return; }
  const {error}=await sb.auth.signInWithPassword({email,password:pw});
  if(error){ msg.textContent='‚ùå '+error.message; return; }
  location.href=toUrl(REDIRECT_ADMIN);
};
document.getElementById('btnSendMagic').onclick=async()=>{
  const email=document.getElementById('email').value.trim();
  if(!email){ msg.textContent='‚ö†Ô∏è ‡∏Å‡∏£‡∏≠‡∏Å‡∏≠‡∏µ‡πÄ‡∏°‡∏•'; return; }
  const {error}=await sb.auth.signInWithOtp({email,options:{emailRedirectTo:toUrl(REDIRECT_ADMIN)}});
  msg.textContent=error?('‚ùå '+error.message):'‚úÖ ‡∏™‡πà‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏•‡πâ‡∏ß';
};
</script></body></html>
