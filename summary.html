<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÅ‡∏¢‡∏Å 4 ‡∏ö‡∏•‡πá‡∏≠‡∏Å) ‚Äî R.Good Service</title>

<!-- Supabase UMD (‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠/‡∏≠‡∏¥‡∏ô‡πÅ‡∏≠‡∏õ) -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#f6fbff; --card:#ffffff; --border:#e6eef5; --ink:#0f172a; --mut:#475569;
    --accent:#0ea5a5; --accent2:#60a5fa; --radius:16px;
    --ok:#065f46;   --okbg:#ecfdf5;
    --warn:#b45309; --warnbg:#fff7ed;
    --exp:#b91c1c;  --expbg:#fff1f2;
    --note:#334155;
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family:"Prompt",ui-sans-serif,system-ui; color:var(--ink); background:
    radial-gradient(1000px 500px at 10% -10%, #e6f7ff 0%, transparent 60%),
    radial-gradient(900px 450px at 110% 0%, #e8fff6 0%, transparent 60%),
    #f6fbff;
  }
  header{
    padding:18px; background:linear-gradient(135deg,#e0f7f5,#f0fdfa);
    border-bottom:1px solid var(--border); display:flex; align-items:center; gap:12px
  }
  .logo{font-weight:700; font-size:22px; color:#0b3a4f}
  .wrap{max-width:1100px;margin:22px auto;padding:0 14px}
  .card{
    background:var(--card); border:1px solid var(--border); border-radius:var(--radius);
    padding:18px; margin-bottom:14px; box-shadow:0 6px 22px rgba(10,30,60,.06)
  }
  h2{margin:0 0 10px; font-size:22px; color:#0b3a4f}
  .mut{color:var(--mut); font-size:16px}
  .row{display:flex; gap:10px; flex-wrap:wrap; align-items:center}
  .spacer{flex:1}
  input, button{
    padding:12px 14px; border-radius:12px; border:1px solid var(--border); background:#fff;
    font-size:18px; color:var(--ink)
  }
  .btn{cursor:pointer; background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#fff; font-weight:700; border:none}
  .btn-ghost{background:#fff; color:#0e7490; border:1px solid #94d5e5; font-weight:700}

  /* ‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ */
  .list-title{font-size:20px; font-weight:700; margin-bottom:8px; color:#0b3a4f}
  .item{
    border:1px solid var(--border); border-radius:14px; padding:16px; margin:12px 0;
    background:#fff; box-shadow:0 3px 14px rgba(10,30,60,.05)
  }
  .item h3{margin:0 0 6px; font-size:22px}
  .sub{color:#334155; font-size:18px; margin-bottom:10px}
  .grid{display:grid; grid-template-columns: 1fr 1fr; gap:10px 16px; margin-top:6px}
  .kv{font-size:17px}
  .kv b{display:inline-block; min-width:120px; color:#334155}
  .badge{padding:8px 14px; border-radius:999px; font-weight:800; display:inline-block; font-size:18px}
  .ok{ color:var(--ok);   background:var(--okbg);   border:1px solid #a7f3d090; }
  .warn{color:var(--warn); background:var(--warnbg); border:1px solid #fde68a80;}
  .exp{ color:var(--exp);  background:var(--expbg);  border:1px solid #fecaca90;}
  .note{color:var(--note); background:#f8fafc; border:1px dashed #cbd5e1; padding:12px; border-radius:12px; font-size:17px; white-space:pre-wrap}

  .empty{color:var(--mut); font-size:18px; padding:14px}

  /* ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏•‡πá‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡∏°‡∏µ‡∏™‡∏µ‡∏Ç‡∏≠‡∏ö‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏ä‡∏±‡∏î‡πÜ */
  .blk-near{ border-left:6px solid #f59e0b40; }
  .blk-inprog{ border-left:6px solid #f59e0b; }
  .blk-stopped{ border-left:6px solid #ef4444; }
  .blk-done{ border-left:6px solid #10b981; }

  @media (max-width:640px){
    input,button{font-size:18px}
    .grid{grid-template-columns: 1fr}
    .item h3{font-size:20px}
  }
</style>
</head>
<body>
<header>
  <div class="logo">üóÇÔ∏è ‡∏™‡∏£‡∏∏‡∏õ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ (‡πÅ‡∏¢‡∏Å 4 ‡∏ö‡∏•‡πá‡∏≠‡∏Å)</div>
  <div class="spacer"></div>
  <button class="btn-ghost" onclick="history.length>1?history.back():window.close()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
</header>

<main class="wrap">
  <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤/‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó -->
  <div class="card">
    <h2>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó</h2>
    <div id="companyName" class="mut" style="margin-bottom:10px">‚Äî</div>

    <div class="row">
      <input id="q" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤: ‡∏ä‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏≤ / ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏°‡∏±‡∏ç" style="min-width:260px">
      <button id="clearBtn" class="btn-ghost">‡∏•‡πâ‡∏≤‡∏á</button>
      <div class="spacer"></div>
      <button id="refreshBtn" class="btn">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button>
    </div>

    <div class="row" style="margin-top:12px;gap:12px">
      <div class="btn-ghost" style="cursor:default">‡πÉ‡∏Å‡∏•‡πâ/‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏: <b id="cnt-near">0</b></div>
      <div class="btn-ghost" style="cursor:default">‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£: <b id="cnt-inprog">0</b></div>
      <div class="btn-ghost" style="cursor:default">‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß: <b id="cnt-stopped">0</b></div>
      <div class="btn-ghost" style="cursor:default">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß: <b id="cnt-done">0</b></div>
      <div class="spacer"></div>
      <div class="mut" id="count">‚Äî</div>
    </div>
  </div>

  <!-- ‡∏ö‡∏•‡πá‡∏≠‡∏Å 1: ‡πÉ‡∏Å‡∏•‡πâ/‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ -->
  <div class="card blk-near">
    <div class="list-title">‡πÉ‡∏Å‡∏•‡πâ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏ / ‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏</div>
    <div id="list-near" class="list"></div>
  </div>

  <!-- ‡∏ö‡∏•‡πá‡∏≠‡∏Å 2: ‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ -->
  <div class="card blk-inprog">
    <div class="list-title">‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</div>
    <div id="list-inprog" class="list"></div>
  </div>

  <!-- ‡∏ö‡∏•‡πá‡∏≠‡∏Å 3: ‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß -->
  <div class="card blk-stopped">
    <div class="list-title">‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß</div>
    <div id="list-stopped" class="list"></div>
  </div>

  <!-- ‡∏ö‡∏•‡πá‡∏≠‡∏Å 4: ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß -->
  <div class="card blk-done">
    <div class="list-title">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß</div>
    <div id="list-done" class="list"></div>
  </div>
</main>

<script>
/* ===== Supabase ===== */
const SUPABASE_URL = "https://qmugpalgcktfwixqepti.supabase.co";
const SUPABASE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFtdWdwYWxnY2t0ZndpeHFlcHRpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg4NzI3NjcsImV4cCI6MjA3NDQ0ODc2N30.cIOCbJAr8_Gbg8d5IxpTQZKVRgl1ETN1hyBgL2_LveA";
const sb = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

/* ===== Utils ===== */
const $ = (id)=>document.getElementById(id);
const WARNING_DAYS = 90;

function fmtDateBE(d){
  if(!d) return '-';
  const t = new Date(d); if(isNaN(t)) return '-';
  try{
    return t.toLocaleDateString('th-TH-u-ca-buddhist', {year:'numeric', month:'short', day:'numeric', timeZone:'Asia/Bangkok'});
  }catch(e){
    return `${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()+543}`;
  }
}
function escapeHtml(s){return String(s??'').replace(/[&<>"']/g, m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));}

/* ===== Data State ===== */
let FULL = [];
let FILTER_Q = '';
let GROUPS = { near:[], inprog:[], stopped:[], done:[] };

/* ===== Badge logic (‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Äú‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‚Äù ‡πÅ‡∏•‡πâ‡∏ß) ===== */
function computeBadge(row){
  if (row.renewed_status === '‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£') return `<span class="badge warn">‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</span>`;
  if (row.renewed_status === '‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß')     return `<span class="badge exp">‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß</span>`;
  if (row.renewed_status === '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß' || row.renewed_until) return `<span class="badge ok">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß</span>`;

  if(!row.expiry_date) return `<span class="badge ok">‡∏õ‡∏Å‡∏ï‡∏¥</span>`;
  const diff = Math.ceil((new Date(row.expiry_date) - new Date())/86400000);
  if(diff < 0) return `<span class="badge exp">‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏</span>`;
  if(diff <= WARNING_DAYS) return `<span class="badge warn">‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ${diff} ‡∏ß‡∏±‡∏ô</span>`;
  return `<span class="badge ok">‡∏õ‡∏Å‡∏ï‡∏¥</span>`;
}

/* ===== ‡∏Å‡∏•‡∏∏‡πà‡∏° ‚Äú‡πÉ‡∏Å‡∏•‡πâ/‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‚Äù ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏ó‡∏±‡∏ö‡∏Å‡∏±‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏∑‡πà‡∏ô ===== */
function inNearBucket(row){
  if (row.renewed_status === '‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' ||
      row.renewed_status === '‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß' ||
      row.renewed_status === '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß' ||
      row.renewed_until) return false;
  if (!row.expiry_date) return false;
  const diff = Math.ceil((new Date(row.expiry_date) - new Date())/86400000);
  return (diff <= WARNING_DAYS);
}

/* ===== Filter + Group ===== */
function applyFilterAndGroup(){
  const q = FILTER_Q.toLowerCase();
  const rows = FULL.filter(r=>{
    if(!q) return true;
    return ( (r.brand_name||'').toLowerCase().includes(q) ||
             (r.common_label||'').toLowerCase().includes(q) );
  });

  GROUPS.inprog  = rows.filter(r=> r.renewed_status === '‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');
  GROUPS.stopped = rows.filter(r=> r.renewed_status === '‡πÑ‡∏°‡πà‡∏ï‡πà‡∏≠‡∏≠‡∏≤‡∏¢‡∏∏‡πÅ‡∏•‡πâ‡∏ß');
  GROUPS.done    = rows.filter(r=> r.renewed_status === '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß' || r.renewed_until);
  GROUPS.near    = rows.filter(r=> inNearBucket(r));

  $('cnt-near').textContent    = GROUPS.near.length.toLocaleString('th-TH');
  $('cnt-inprog').textContent  = GROUPS.inprog.length.toLocaleString('th-TH');
  $('cnt-stopped').textContent = GROUPS.stopped.length.toLocaleString('th-TH');
  $('cnt-done').textContent    = GROUPS.done.length.toLocaleString('th-TH');

  const total = GROUPS.near.length + GROUPS.inprog.length + GROUPS.stopped.length + GROUPS.done.length;
  $('count').textContent = `‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ "${FILTER_Q || '‚Äî'}" ‡∏£‡∏ß‡∏° ${total.toLocaleString('th-TH')} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
}

/* ===== ‡∏ß‡∏≤‡∏î‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ö‡∏•‡πá‡∏≠‡∏Å (‡πÑ‡∏°‡πà‡∏õ‡∏ô‡∏Å‡∏±‡∏ô) ===== */
function renderList(listId, rows){
  const box = $(listId);
  if(rows.length === 0){
    box.innerHTML = `<div class="empty">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</div>`;
    return;
  }
  box.innerHTML = rows.map(r=>{
    const statusHtml = computeBadge(r);
    const note = r.renewed_note ? escapeHtml(r.renewed_note) : '';
    return `
      <div class="item">
        <h3>${escapeHtml(r.brand_name||'-')}</h3>
        <div class="sub">${escapeHtml(r.common_label||'-')}</div>

        <div class="grid">
          <div class="kv"><b>‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô:</b> ${escapeHtml(r.registration_no||'-')}</div>
          <div class="kv"><b>‡πÉ‡∏ö‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï:</b> ${escapeHtml(r.license_no||'-')}</div>
          <div class="kv"><b>‡∏´‡∏°‡∏î‡∏≠‡∏≤‡∏¢‡∏∏‡πÄ‡∏î‡∏¥‡∏°:</b> ${fmtDateBE(r.expiry_date)}</div>
          <div class="kv"><b>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</b> ${statusHtml}</div>
        </div>

        ${ note ? `<div class="note" style="margin-top:10px"><b>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏:</b>\n${note}</div>` : ``}
      </div>
    `;
  }).join('');
}

/* ===== ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ===== */
async function loadData(){
  const params = new URLSearchParams(location.search);
  const code = (params.get('code')||'').trim().toUpperCase();
  if(!code){
    $('companyName').textContent = '‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡πà‡∏á‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏°‡∏≤ (?code=...)';
    return;
  }

  const nameRes = await sb.rpc('get_company_name_by_code', { p_plain_code: code });
  $('companyName').textContent = nameRes.data ? `‡∏ö‡∏£‡∏¥‡∏©‡∏±‡∏ó: ${nameRes.data} (‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${code})` : `‡∏£‡∏´‡∏±‡∏™‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${code}`;

  const res = await sb.rpc('get_company_portal', { p_plain_code: code });
  if(res.error){
    $('companyName').textContent += ` ‚Äî ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ${res.error.message}`;
    return;
  }

  // ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤: ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ renewed_until ‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ renewed_status ‡πÉ‡∏´‡πâ‡∏ñ‡∏∑‡∏≠‡∏ß‡πà‡∏≤ "‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß"
  FULL = (res.data||[]).map(x=>({ ...x, renewed_status: x.renewed_status || (x.renewed_until ? '‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏•‡πâ‡∏ß' : null) }));

  applyFilterAndGroup();
  renderList('list-near',    GROUPS.near);
  renderList('list-inprog',  GROUPS.inprog);
  renderList('list-stopped', GROUPS.stopped);
  renderList('list-done',    GROUPS.done);
}

/* ===== Events ===== */
document.addEventListener('DOMContentLoaded', ()=>{
  loadData();

  $('q').addEventListener('input', ()=>{
    FILTER_Q = $('q').value.trim();
    applyFilterAndGroup();
    renderList('list-near',    GROUPS.near);
    renderList('list-inprog',  GROUPS.inprog);
    renderList('list-stopped', GROUPS.stopped);
    renderList('list-done',    GROUPS.done);
  });

  $('clearBtn').addEventListener('click', ()=>{
    $('q').value=''; FILTER_Q='';
    applyFilterAndGroup();
    renderList('list-near',    GROUPS.near);
    renderList('list-inprog',  GROUPS.inprog);
    renderList('list-stopped', GROUPS.stopped);
    renderList('list-done',    GROUPS.done);
  });

  $('refreshBtn').addEventListener('click', loadData);
});
</script>
</body>
</html>
